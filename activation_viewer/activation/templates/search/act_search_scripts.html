{% load staticfiles %}
{% if DEBUG_STATIC %}
<script src="{{ STATIC_URL }}lib/js/bootstrap-datepicker.js" type="text/javascript"></script>
<script src="{{ STATIC_URL }}lib/js/angular.js"></script>
<script src="{{ STATIC_URL }}lib/js/angular-leaflet-directive.min.js"></script>
{% endif %}

{% if include_spatial == 'true' %}
<style>
  .filter-map-container {  /* filter map */
    height: 300px;
  }
</style>

{% include 'search/_spatial_tags.html' %}

{% endif %}
<script src="{{ STATIC_URL }}geonode/js/search/explore.js"></script>
<script src="{% static "js/app/scripts/act_search.js" %}"></script>

<script type="text/javascript">
  $("body").attr('ng-controller', 'geonode_search_controller');
  DISASTER_TYPES_ENDPOINT = '{% url 'api_dispatch_list' api_name='api' resource_name='disastertypes' %}';
  KEYWORDS_ENDPOINT = '{% url 'api_dispatch_list' api_name='api' resource_name='act-keywords' %}';
  REGIONS_ENDPOINT = '{% url 'api_dispatch_list' api_name='api' resource_name='regions' %}';
  CLIENT_RESULTS_LIMIT = {{ CLIENT_RESULTS_LIMIT }};
  AUTOCOMPLETE_URL_RESOURCEBASE = '{% url "autocomplete_light_autocomplete" "ResourceBaseAutocomplete" %}';
  AUTOCOMPLETE_URL_REGION = '{% url "autocomplete_light_autocomplete" "RegionAutocomplete" %}';
  MAP_INITIAL_CENTER = [42.7351, 13.2537];
  GEOSERVER_PUBLIC_URL = "{{ GEOSERVER_BASE_URL }}";
  var controllers = ['geonode_main_search', 
                     'cart', 
                     'layers_switcher_controller', 
                     'layers_switcher_directive',
                     'map_controller',
                     'actications_list_controller']; 
  var module = angular.module('search', controllers);
  module.constant('ActData', {
    full_bbox: [-140, -70, 140, 70]        
  });
  module.constant('Configs', {
    url: SEARCH_URL,
    geoserver_public_url: "{{ GEOSERVER_BASE_URL }}"
  });

  var deps = ['search','leaflet-directive'];

  angular.bootstrap(document, deps);
</script>
